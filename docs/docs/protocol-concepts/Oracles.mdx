---
title: Oracles
sidebar_position: 3
---

import Admonition from '@theme/Admonition';

```mdx-code-block
import Tooltip from '@site/src/components/Tooltip/Tooltip';
```

# Oracles

## Introduction

Oracles are specialized entities that connect blockchains to external data sources, enabling smart contracts to access real-world information.

In the StakeWise protocol, Oracles monitor validator performance data on the Beacon Chain and reach consensus on validator registration approvals, reward distribution, and exit processes within Vaults.

Oracles are a crucial part of the protocol, and must remain sufficiently decentralized and maintain high uptime in order for StakeWise to work seamlessly.

The protocol operates with [11 Oracles](#oracle-network-participants) selected and [approved ↗](https://vote.stakewise.io/#/proposal/0x54ceedefd1060fbad17ab6181be5a90da4c686dc071d1f6121d24c0398700be6)
by the StakeWise DAO through governance processes.
These Oracles form a decentralized network of independent nodes that ensures protocol resilience and prevents single points of failure.
This distributed approach eliminates centralized control, reduces regulatory capture risks, and ensures protocol longevity through consensus-based decision making.

Oracle decisions require threshold-based consensus depending on the operation.
Validator registration requires 8 out of 11 Oracle signatures, while reward updates need 6 out of 11 signatures.

Through Oracle consensus, all Vaults stay synced with the Beacon Chain, display accurate information, trigger secure and timely new validator registrations, and fulfill exit requests.
These duties are performed automatically using Oracle software developed by the StakeWise team, with no manual actions involved.

Oracles are one of the protocol’s building blocks to deliver seamless staking and unstaking experiences.

## Oracle Duties

Oracles run the [v3-oracle ↗](https://github.com/stakewise/v3-oracle) nodes and are responsible for validator registration, reward distribution, and validator exits.

### Validator Registration Approval

Oracles approve validator registration requests before they are submitted to the Beacon Chain [Deposit Contract ↗](https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa#code).

The [Operator Service →](../../operator/operator-service) periodically checks whether its Vaults have accumulated enough ETH for registering new validator(s).
Upon having enough ETH, the operator sends a registration approval request to Oracles that includes encrypted exit signature(s) for the validator(s) it is attempting to create.
This is done to maintain the protocol’s ability to exit validators on demand, and to perform checks against the front-running withdrawal credentials attack described [here ↗](https://blog.lido.fi/vulnerability-response-update/).
The operator must receive **8 out of 11 approvals** from Oracles to register a validator for the Vault.

<Admonition type="tip" icon="⏳" title="Approval Process">
  <ol style={{ listStyleType: "none", paddingLeft: "0" }}>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>1.</span> Operator sends the validator registration requests and encrypted exit signatures to the Oracles.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>2.</span> Oracles sign approval messages that include the current tree root hash from the Beacon Chain Deposit Contract.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>3.</span> Operator submits registration to the Vault contract with Oracle signatures.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>4.</span> Vault contract calls the [Keeper contract ↗](https://etherscan.io/address/0x6B5815467da09DaA7DC83Db21c9239d98Bb487b5#code) to validate Oracle signatures and confirm the tree root hash hasn't changed.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>5.</span> Vault transfers ETH to the Beacon Chain deposit contract to complete validator registration.</li>
  </ol>
</Admonition>

This process ensures Oracles approve validators based on current Beacon Chain state, bridging the consensus and execution layers while preventing stale approvals and replay attacks.

For details on how the [Operator Service →](../../operator/operator-service) initiates and prepares validator registration, see the *Operator Service*: [*Validator Registration* →](../../operator/operator-service#validator-registration) section.

### Reward Distribution

Oracles periodically vote on the consensus rewards/penalties accumulated by the Vaults in the Beacon Chain and execution rewards (MEV & priority fees) for the Vaults connected to the Smoothing Pool.

The reward distribution process consists of the following steps:

<Admonition type="tip" icon="💰" title="Reward Distribution Process">
  <ol style={{ listStyleType: "none", paddingLeft: "0" }}>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>1.</span> Verify sufficient time has passed since the last reward distribution.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>2.</span> Calculate rewards/penalties for all Vaults based on validator balances in the Beacon Chain.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>3.</span> Calculate MEV and priority fee rewards for Vaults connected to the Smoothing Pool.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>4.</span> Create Merkle trees from reward calculations and upload them to IPFS. For example, <code>bafkreibqhdr6p5uh67ickt4dpppb525bwuofjocnpsx4dbl57llogfph2e</code>.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>5.</span> Save the cryptographically signed vote to the local database and expose via API.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>6.</span> The [Keeper service ↗](https://github.com/stakewise/v3-keeper/) fetches votes from Oracle APIs, concatenates them, and sends the resulting transaction to the [Keeper contract ↗](https://etherscan.io/address/0x6B5815467da09DaA7DC83Db21c9239d98Bb487b5#code).</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>7.</span> Upon verification, the protocol updates global state.</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>8.</span> Individual Vaults can claim their rewards.</li>
  </ol>
</Admonition>

The reward update process has protocol-wide impact.

### Validator Exits

The validator exit process is automated and trustless.
Validator exits require exit signatures that are generated during the [Validator Registration →](../../operator/operator-service#validator-registration) process.

As part of registration, the Operator Service encrypts exit signatures using Shamir's secret sharing and distributes them to all Oracles.

This approach ensures validators can be exited on demand while maintaining protocol security through decentralized signature management.

## Oracle Network Participants

<Admonition type="tip" icon="🔮" title="Oracle Network Participants">
  <ol style={{ listStyleType: "none", paddingLeft: "0" }}>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>1.</span> [Chorus One ↗](https://chorus.one/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>2.</span> [Stake.fish ↗](https://stake.fish/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>3.</span> [Telekom ↗](https://www.telekom-mms.com/) (formerly T-Systems MMS)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>4.</span> [Finoa Consensus Services ↗](https://www.finoa.io/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>5.</span> [Bitfly ↗](https://gobitfly.com/) (operators of the [Beaconchain ↗](https://beaconcha.in/) explorer)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>6.</span> [SenseiNode ↗](https://www.senseinode.com/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>7.</span> [Gateway.fm ↗](https://gateway.fm/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>8.</span> [Gnosis Chain ↗](https://www.gnosis.io/) team</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>9.</span> [P2P ↗](https://p2p.org/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>10.</span> [DSRV ↗](https://www.dsrvlabs.com/)</li>
    <li><span style={{ display: "inline-block", width: "3ch", textAlign: "left" }}>11.</span> [StakeWise Labs ↗](https://x.com/stakewise_io) (the development team)</li>
  </ol>
</Admonition>
